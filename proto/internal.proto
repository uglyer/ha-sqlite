syntax = "proto3";

option go_package = "github.com/uglyer/ha-sqlite/proto";

service HaSqliteInternal {
  rpc Join(JoinRequest) returns (JoinResponse) {}
}

enum ResultCode {
  SUCCESS = 0;
  UNKNOWN_FAILED = 1;
  NOT_A_LEADER = 2;
}

message JoinRequest {
  string id = 1;
  string address = 2;
  uint64 previous_index = 3;
}

message JoinResponse {
  ResultCode code = 1;
  string message = 2;
  uint64 index = 3;
}
